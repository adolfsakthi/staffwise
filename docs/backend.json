
{
  "entities": {
    "AttendanceRecord": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AttendanceRecord",
      "type": "object",
      "description": "Represents an employee's attendance record.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the attendance record."
        },
        "employeeName": {
          "type": "string",
          "description": "Name of the employee."
        },
        "email": {
          "type": "string",
          "description": "Email address of the employee.",
          "format": "email"
        },
        "department": {
          "type": "string",
          "description": "Department the employee belongs to."
        },
        "shiftStart": {
          "type": "string",
          "description": "Scheduled start time of the employee's shift (HH:MM)."
        },
        "shiftEnd": {
          "type": "string",
          "description": "Scheduled end time of the employee's shift (HH:MM)."
        },
        "entryTime": {
          "type": "string",
          "description": "Actual time the employee entered (HH:MM)."
        },
        "exitTime": {
          "type": "string",
          "description": "Actual time the employee exited (HH:MM)."
        },
        "date": {
          "type": "string",
          "description": "Date of the attendance record (YYYY-MM-DD)."
        },
        "isLate": {
          "type": "boolean",
          "description": "Indicates whether the employee was late."
        },
        "lateByMinutes": {
          "type": "number",
          "description": "Number of minutes the employee was late."
        },
        "overtimeMinutes": {
          "type": "number",
          "description": "Number of overtime minutes worked by the employee."
        },
        "isAudited": {
          "type": "boolean",
          "description": "Indicates whether the attendance record has been audited."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the record was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "employeeName",
        "email",
        "department",
        "shiftStart",
        "shiftEnd",
        "entryTime",
        "exitTime",
        "date",
        "isLate",
        "lateByMinutes",
        "overtimeMinutes",
        "isAudited",
        "createdAt"
      ]
    },
    "GraceSetting": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "GraceSetting",
      "type": "object",
      "description": "Represents grace time settings for late entry detection, either globally or for a specific department.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the grace setting."
        },
        "department": {
          "type": "string",
          "description": "Department this grace setting applies to.  Null indicates a global setting.",
          "format": "string"
        },
        "graceMinutes": {
          "type": "number",
          "description": "Grace time in minutes."
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when the grace setting was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "graceMinutes",
        "updatedAt"
      ]
    },
    "AuditLog": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AuditLog",
      "type": "object",
      "description": "Represents a log of an audit execution.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the audit log."
        },
        "auditDate": {
          "type": "string",
          "description": "Date the audit was performed for (YYYY-MM-DD)."
        },
        "totalRecords": {
          "type": "number",
          "description": "Total number of attendance records processed during the audit."
        },
        "lateCount": {
          "type": "number",
          "description": "Number of late entries detected during the audit."
        },
        "executedAt": {
          "type": "string",
          "description": "Timestamp indicating when the audit was executed.",
          "format": "date-time"
        },
        "triggeredBy": {
          "type": "string",
          "description": "Indicates whether the audit was triggered manually or automatically ('manual' or 'auto')."
        }
      },
      "required": [
        "id",
        "auditDate",
        "totalRecords",
        "lateCount",
        "executedAt",
        "triggeredBy"
      ]
    },
    "EmailLog": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "EmailLog",
      "type": "object",
      "description": "Represents a log of an email notification.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the email log."
        },
        "to": {
          "type": "string",
          "description": "Recipient email address."
        },
        "subject": {
          "type": "string",
          "description": "Subject of the email."
        },
        "body": {
          "type": "string",
          "description": "HTML body of the email."
        },
        "emailType": {
          "type": "string",
          "description": "Type of email ('late_notice', 'admin_report', 'department_report')."
        },
        "sentAt": {
          "type": "string",
          "description": "Timestamp indicating when the email was sent.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "to",
        "subject",
        "body",
        "emailType",
        "sentAt"
      ]
    },
    "AutoAuditSetting": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AutoAuditSetting",
      "type": "object",
      "description": "Represents the configuration for the auto-audit feature.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the auto audit settings. Must be 'auto_audit_config'."
        },
        "enabled": {
          "type": "boolean",
          "description": "Indicates whether the auto-audit is enabled."
        },
        "auditTime": {
          "type": "string",
          "description": "Time of day to run the auto-audit (HH:MM)."
        }
      },
      "required": [
        "id",
        "enabled",
        "auditTime"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user profile.",
      "properties": {
        "uid": { "type": "string", "description": "Unique identifier for the user, from Firebase Auth." },
        "email": { "type": "string", "description": "User's email address.", "format": "email" },
        "displayName": { "type": "string", "description": "User's display name." },
        "role": { "type": "string", "description": "User's role (e.g., Admin, Manager, Staff)." },
        "property_code": { "type": "string", "description": "The property code the user belongs to." },
        "createdAt": { "type": "string", "description": "Timestamp of user creation.", "format": "date-time" }
      },
      "required": ["uid", "email", "role", "property_code", "createdAt"]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": { "$ref": "#/entities/User" },
          "description": "Stores user profiles.",
          "params": [{ "name": "userId", "description": "User's unique ID." }]
        }
      },
      {
        "path": "/attendance_records/{attendanceRecordId}",
        "definition": {
          "entityName": "AttendanceRecord",
          "schema": {
            "$ref": "#/entities/AttendanceRecord"
          },
          "description": "Stores individual employee attendance records.",
          "params": [
            {
              "name": "attendanceRecordId",
              "description": "Unique identifier for the attendance record."
            }
          ]
        }
      },
      {
        "path": "/grace_settings/{graceSettingId}",
        "definition": {
          "entityName": "GraceSetting",
          "schema": {
            "$ref": "#/entities/GraceSetting"
          },
          "description": "Stores grace time settings for late entry detection, either globally or for a specific department. The document ID 'global' represents global settings; otherwise, the ID is the department name.",
          "params": [
            {
              "name": "graceSettingId",
              "description": "Unique identifier for the grace setting. Use 'global' for global settings, or a department name for department-specific settings."
            }
          ]
        }
      },
      {
        "path": "/audit_logs/{auditLogId}",
        "definition": {
          "entityName": "AuditLog",
          "schema": {
            "$ref": "#/entities/AuditLog"
          },
          "description": "Stores audit logs with details about each audit execution.",
          "params": [
            {
              "name": "auditLogId",
              "description": "Unique identifier for the audit log."
            }
          ]
        }
      },
      {
        "path": "/email_logs/{emailLogId}",
        "definition": {
          "entityName": "EmailLog",
          "schema": {
            "$ref": "#/entities/EmailLog"
          },
          "description": "Stores email logs for tracking notifications.",
          "params": [
            {
              "name": "emailLogId",
              "description": "Unique identifier for the email log."
            }
          ]
        }
      },
      {
        "path": "/auto_audit_settings/auto_audit_config",
        "definition": {
          "entityName": "AutoAuditSetting",
          "schema": {
            "$ref": "#/entities/AutoAuditSetting"
          },
          "description": "Stores the configuration for auto-auditing. There is only one document with the fixed ID 'auto_audit_config'.",
          "params": []
        }
      }
    ]
  }
}

    