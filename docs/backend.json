{
  "entities": {
    "AttendanceRecord": {
      "title": "AttendanceRecord",
      "type": "object",
      "description": "Stores all employee attendance entries.",
      "properties": {
        "property_code": {
          "type": "string",
          "description": "Unique identifier for the property or branch."
        },
        "employee_name": {
          "type": "string",
          "description": "Name of the employee."
        },
        "email": {
          "type": "string",
          "description": "Email address of the employee.",
          "format": "email"
        },
        "department": {
          "type": "string",
          "description": "Department the employee belongs to."
        },
        "shift_start": {
          "type": "string",
          "description": "Scheduled shift start time (HH:MM)."
        },
        "shift_end": {
          "type": "string",
          "description": "Scheduled shift end time (HH:MM)."
        },
        "entry_time": {
          "type": "string",
          "description": "Actual entry time (HH:MM)."
        },
        "exit_time": {
          "type": "string",
          "description": "Actual exit time (HH:MM)."
        },
        "date": {
          "type": "string",
          "description": "Date of the attendance record (YYYY-MM-DD)."
        },
        "is_late": {
          "type": "boolean",
          "description": "Indicates whether the employee was late."
        },
        "late_by_minutes": {
          "type": "number",
          "description": "Number of minutes the employee was late."
        },
        "overtime_minutes": {
          "type": "number",
          "description": "Number of overtime minutes worked."
        },
        "is_audited": {
          "type": "boolean",
          "description": "Indicates whether the record has been audited."
        },
        "audit_notes": {
            "type": "string",
            "description": "Notes from the audit."
        }
      },
      "required": [
        "property_code",
        "employee_name",
        "email",
        "department",
        "shift_start",
        "shift_end",
        "entry_time",
        "exit_time",
        "date",
        "is_late",
        "late_by_minutes",
        "overtime_minutes",
        "is_audited"
      ]
    },
    "Device": {
      "title": "Device",
      "type": "object",
      "description": "Represents a biometric device.",
      "properties": {
        "property_code": { "type": "string", "description": "Unique identifier for the property or branch." },
        "name": { "type": "string" },
        "model": { "type": "string" },
        "ip": { "type": "string" },
        "status": { "type": "string", "enum": ["online", "offline"] },
        "branch": { "type": "string" }
      },
      "required": ["property_code", "name", "model", "status", "branch"]
    },
    "LiveLog": {
        "title": "LiveLog",
        "type": "object",
        "description": "Represents a real-time attendance event.",
        "properties": {
            "property_code": { "type": "string", "description": "Unique identifier for the property or branch." },
            "type": { "type": "string", "enum": ["late", "overtime", "early", "on_time"] },
            "employee": { "type": "string" },
            "department": { "type": "string" },
            "time": { "type": "string" },
            "deviation": { "type": "number" }
        },
        "required": ["property_code", "type", "employee", "department", "time"]
    },
    "User": {
        "title": "User",
        "type": "object",
        "description": "Represents an application user.",
        "properties": {
            "property_code": { "type": "string", "description": "Unique identifier for the property or branch." },
            "displayName": { "type": "string" },
            "email": { "type": "string", "format": "email" },
            "role": { "type": "string" },
            "uid": { "type": "string" }
        },
        "required": ["property_code", "displayName", "email", "role", "uid"]
    },
    "Role": {
        "title": "Role",
        "type": "object",
        "description": "Defines a user role and its permissions.",
        "properties": {
            "property_code": { "type": "string", "description": "Unique identifier for the property or branch." },
            "name": { "type": "string" },
            "permissions": { "type": "array", "items": { "type": "string" } }
        },
        "required": ["property_code", "name", "permissions"]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "/attendance_records/{attendance_record_id}": {
      "schema": {
        "$ref": "#/entities/AttendanceRecord"
      },
      "description": "Stores all employee attendance entries."
    },
    "/devices/{device_id}": {
        "schema": { "$ref": "#/entities/Device" },
        "description": "Stores information about connected biometric devices."
    },
    "/live_logs/{log_id}": {
        "schema": { "$ref": "#/entities/LiveLog" },
        "description": "Stores real-time attendance event logs."
    },
    "/users/{user_id}": {
        "schema": { "$ref": "#/entities/User" },
        "description": "Stores application user profiles."
    },
    "/roles/{role_id}": {
        "schema": { "$ref": "#/entities/Role" },
        "description": "Stores user roles and permissions."
    }
  }
}
